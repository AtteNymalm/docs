---
title: Connect to Java
order: 9
layout: page
---

[[designer.java]]
= Connect to Java

You can connect both components and data between Java and the UI made with Designer.
In practice, this is accomplished with a Java class that enables
Vaadin Flow to connect your Java code to the UI. In other words, you access the
UI defined in a design programmatically through the companion class for the design.

To connect a design element to Java:

. Make sure you have <<figure.designer.java.connectedcompanionfile, a companion Java class>> with [classname]#@HtmlImport# and [classname]#@Tag# annotations matching the design.
. Set the [literal]#id# attribute for the element. (Optional)
. Click on the corresponding checkbox for the element in the Outline that you want to connect to Java.

[[designer.java.companion]]
== The Java Companion File

The Java companion file for a design is the file that contains the class that connects
your Java code to the UI defined in the design. There can be only one companion class
for a design.

You may have already created the companion file at the time you
<<../getting-started/designer-getting-started#designer.getting-started.design, created the design>>
using the new design wizard. If that is the case you are all set. You can start
<<designer.java.components, connecting components>> and <<designer.java.data, data>>.

There is a companion file status indicator on the top right of the editor toolbar. The connection has
three states: <<figure.designer.java.nocompanionfile, no connected file>>, <<figure.designer.java.connectedcompanionfile, connected to a java companion file>> or <<figure.designer.java.connectedmultiplecompanionfiles, connected to multiple java files>>.

[[figure.designer.java.nocompanionfile]]
.Design is not connected to any Java companion file
image::images/designer-3-no-companion-file.png[width=60%, scaledwidth=100%]

[[figure.designer.java.connectedcompanionfile]]
.Design is connected to a Java companion file
image::images/designer-3-connected-companion-file.png[width=60%, scaledwidth=100%]

[[figure.designer.java.connectedmultiplecompanionfiles]]
.Design is connected to multiple Java companion files
image::images/designer-3-connected-multiple-companion-files.png[width=60%, scaledwidth=100%]

When you have connected your design with a java companion file, you can simply navigate to the file by clicking on the connected indicator.
However, if you do not have a companion file for your design, you need to create one manually.
Here is a code snippet for a companion file that is a valid starting point for any design. It
has been written as if it was a companion to an imaginary [filename]#my-design.html#. You have
to adapt it by providing the correct values for your design to the [classname]#Tag# and
[classname]#HtmlImport# annotations. The class names are not relevant for Designer.

[source, java]
----
import com.vaadin.ui.Tag;
import com.vaadin.ui.common.HtmlImport;
import com.vaadin.ui.polymertemplate.PolymerTemplate;

@Tag("my-design")
@HtmlImport("context://path/to/my-design.html")
public class MyCompanionClass extends
        PolymerTemplate<MyCompanionClass.MyCompanionClassModel> {

    public interface MyCompanionClassModel extends TemplateModel {

    }
}
----

In general, any Java class will be picked up by Designer as a companion file for the design, as
long as the class is a descendant of [classname]#com.vaadin.ui.Component#, it is annotated with
[classname]#com.vaadin.ui.Tag# annotation, with the annotation's value matching the design's
[classname]#dom-module id# and the value of the [classname]#com.vaadin.ui.HtmlImport# annotation matches the design path.
So, if you have a specific need, you can freely customize the
companion class to match your needs. You can learn more about designs in 
link:https://vaadin.com/docs/v10/flow/polymer-templates/tutorial-template-basic.html[Flow documentation].

[[designer.java.components]]
== Connecting Components

Designer helps to connect the components used in the design to Java but before
that can happen you need three things:

. You need a companion file for the design. See the <<designer.java.companion>> for how to get one.
. The component you want to connect to Java should have its [classname]#id# property set to a unique value (among all the
[classname]#id# property values in the same design). If its [classname]#id# is empty, Designer will generate one for you.
. The project must have Vaadin Flow libraries as dependencies. Those are needed to correctly set the type of the new field.

When a companion file for the design exists, the [guilabel]#Java# column in the [guilabel]#Outline# should show a checkbox for each component which has a Java type to export.
You can export the component to Java side by clicking on its checkbox in Java column, as illustrated in the bellow picture.

NOTE: When you make changes in your java companion file, it will take a few seconds to update the status of the checkboxes and the connection indicator on the toolbar.

[[figure.designer.java.add]]
.Adding a Field
image::images/designer-3-export-a-component.png[width=40%, scaledwidth=100%]

Choosing to add the field in the previous picture will insert the following field to the companion class:

[source, java]
----
    @Id("username")
    private TextField username;
----

Flow uses the [classname]#@Id# annotation to connect the UI textfield to the field. The value in the annotation
must match the [classname]#id# property of the component in the design. Otherwise, you are free to change 
the type, name and visibility of the field. Just be careful not to break it for Flow.

Take a look at the Flow documentation to learn more about
link:https://vaadin.com/docs/v10/flow/polymer-templates/tutorial-template-components.html[binding components in Flow].

You can also remove the field by unchecking the checkbox in the Outline.

[[figure.designer.java.remove]]
.Removing a Field
image:images/designer-3-unexport-a-component.png[width=40%, scaledwidth=100%]

Removing a field will erase it from the companion class along with its [classname]#@Id# annotation.

You should not have more than one companion class for a design, or more than one field annotated with
the same [classname]#@Id# value, but if you do, all of them will be shown in the Java checkbox tooltip so that
you can easily locate them to fix the problem manually.

[[designer.java.data]]
== Connecting Data

You can also bind data from Java to the UI. Designer provides you with a starting point
by adding the template model inner class into the companion file when the file is created.
You can learn more about binding data to designs in
link:https://vaadin.com/docs/v10/flow/polymer-templates/tutorial-template-bindings.html[Flow documentation].

